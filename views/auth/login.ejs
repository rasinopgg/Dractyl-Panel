<!DOCTYPE html>
<html class="h-full w-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= name %> - Login</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <link href="../assets/tailwind.css" rel="stylesheet">
</head>
<body style="font-family: 'Inter', sans-serif; background-color: #050505;" class="h-full w-full text-gray-300 antialiased">

<!-- Drayctyl Panel Custom CSS -->
<style>
  /* Custom Scrollbar */
  ::-webkit-scrollbar { width: 8px; height: 8px; }
  ::-webkit-scrollbar-track { background: #111; }
  ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
  ::-webkit-scrollbar-thumb:hover { background: #D4AF37; }

  /* Gold Gradient Text */
  .text-gold-gradient { background: linear-gradient(to right, #FFD700, #FDB931); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

  .glass-panel { background: rgba(26, 26, 26, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255, 215, 0, 0.15); }
</style>

<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-dark-900 to-dark-800 px-4">
  <div class="w-full max-w-md space-y-8">

    <!-- Header -->
    <div class="text-center">
      <div class="flex justify-center items-center gap-4 mb-8">
        <i class="fa-solid fa-dragon text-gold-500 text-4xl"></i>
        <div>
          <h1 class="text-gold-gradient font-bold text-3xl tracking-wider">DRAYCTYL</h1>
          <p class="text-gray-400 text-sm">Minecraft Server Panel</p>
        </div>
      </div>
      <h2 class="text-2xl font-semibold text-white mb-2">Welcome Back</h2>
      <p class="text-gray-400">Sign in to your account to continue</p>
    </div>

    <!-- Login Form -->
    <div class="glass-panel p-8 rounded-2xl shadow-2xl">
      <form id="login-form" class="space-y-6" onsubmit="event.preventDefault(); submitForm();">

        <div>
          <label for="username" class="block text-sm font-medium text-gray-300 mb-2">
            <i class="fa-solid fa-user mr-2 text-gold-500"></i>Username or Email
          </label>
          <input
            placeholder="Enter your username..."
            id="username"
            autocomplete="username"
            required
            class="w-full px-4 py-3 bg-dark-800/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-gold-500 transition duration-200"
          >
        </div>

        <div>
          <label for="password" class="block text-sm font-medium text-gray-300 mb-2">
            <i class="fa-solid fa-lock mr-2 text-gold-500"></i>Password
          </label>
          <input
            placeholder="Enter your password..."
            id="password"
            name="password"
            type="password"
            autocomplete="current-password"
            required
            class="w-full px-4 py-3 bg-dark-800/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-gold-500 transition duration-200"
          >
        </div>

        <div class="flex items-center justify-between">
          <label class="flex items-center">
            <input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 bg-dark-700 border-gray-600 rounded focus:ring-gold-500 text-gold-500">
            <span class="ml-2 text-sm text-gray-400">Remember me</span>
          </label>
          <a href="/auth/reset-password" class="text-sm text-gold-500 hover:text-gold-400 transition-colors">
            Forgot password?
          </a>
        </div>

        <button
          onclick="submitForm()"
          class="w-full bg-gold-600 hover:bg-gold-500 text-black font-bold py-3 px-4 rounded-xl transition duration-200 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 focus:ring-offset-dark-900"
        >
          <i class="fa-solid fa-sign-in-alt mr-2"></i>
          Sign In
        </button>

        <% if (settings.register) { %>
        <div class="text-center">
          <span class="text-gray-400">Don't have an account? </span>
          <a href="/auth/register" class="text-gold-500 hover:text-gold-400 transition-colors font-medium">
            Register here
          </a>
        </div>
        <% } %>

        <!-- Error Messages -->
        <% if (req.query.err && req.query.err == "InvalidCredentials") { %>
          <div class="p-3 bg-red-900/20 border border-red-500/30 rounded-lg">
            <p class="text-red-400 text-sm flex items-center">
              <i class="fa-solid fa-exclamation-triangle mr-2"></i>
              Invalid credentials. Please try again.
            </p>
          </div>
        <% } %>

        <% if (req.query.err && req.query.err == "UpdatedCredentials") { %>
          <div class="p-3 bg-green-900/20 border border-green-500/30 rounded-lg">
            <p class="text-green-400 text-sm flex items-center">
              <i class="fa-solid fa-check-circle mr-2"></i>
              Your account has been updated, please enter your new credentials.
            </p>
          </div>
        <% } %>

        <% if (req.query.msg && req.query.msg == "EmailVerified") { %>
          <div class="p-3 bg-green-900/20 border border-green-500/30 rounded-lg">
            <p class="text-green-400 text-sm flex items-center">
              <i class="fa-solid fa-check-circle mr-2"></i>
              Your account has been verified, you can login now.
            </p>
          </div>
        <% } %>

        <% if (req.query.msg && req.query.msg == "AccountCreated") { %>
          <div class="p-3 bg-green-900/20 border border-green-500/30 rounded-lg">
            <p class="text-green-400 text-sm flex items-center">
              <i class="fa-solid fa-check-circle mr-2"></i>
              Your account was successfully created, you may sign in now.
            </p>
          </div>
        <% } %>

      </form>
    </div>

    <!-- Footer -->
    <div class="text-center text-xs text-gray-500">
      <p>&copy; 2026 Drayctyl Panel | Powered by MrDraynoX</p>
    </div>

  </div>
</div>

<script>
  function submitForm() {
    let username = document.getElementById("username").value.trim();
    let password = document.getElementById("password").value.trim();

    if (username === "" || password === "") {
      return;
    }

    let encodedUsername = encodeURIComponent(username);
    let encodedPassword = encodeURIComponent(password);

    document.location.href = `/auth/login?username=${encodedUsername}&password=${encodedPassword}`;
  }

  document.getElementById('login-form').addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
      event.preventDefault();
      submitForm();
    }
  });
</script>

</body>
</html>
